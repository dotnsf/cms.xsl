<html>
<head>
<script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
<link rel="stylesheet" href="//cdn.datatables.net/t/bs-3.3.6/jqc-1.12.0,dt-1.10.11/datatables.min.css"/>
<script src="//cdn.datatables.net/t/bs-3.3.6/jqc-1.12.0,dt-1.10.11/datatables.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css" rel="stylesheet"/>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.5.1/js/bootstrap.min.js"></script>
<link href="//use.fontawesome.com/releases/v5.15.4/css/all.css" rel="stylesheet"/>
<script>
$(function(){
  $("#viewtable").DataTable(
    { columnDefs: [ { orderable: false, targets: <%= view_cols.length %> } ] }
  );
});
</script>
</head>
<body>

<!-- ヘッダーボタン（新規作成） -->
<div class="container">
  <a class="btn btn-success" target="doc" href="/form/<%= form %>">Create</a>
</div>

<div class="container">
  <h3><%= view %></h3>
</div>

<div class="container">
  <table class="table table-bordered" id="viewtable">
    <thead>
      <tr>
<% for( var i = 0; i < view_cols.length; i ++ ){ %>
        <th><%= view_cols[i] %></th>
<% } %>
        <th>actions</th>
      </tr>
    </thead>
    <tbody>
<% for( var i = 0; i < docs.length; i ++ ){ %>
      <tr>
<% for( var j = 0; j < view_cols.length; j ++ ){ %>
        <td>
          <a target="doc" href="../doc/<%= docs[i]._id %>">
          <%= docs[i][view_cols[j]] %>
          </a>
        </td>
<% } %>
        <td>
          <a class="btn btn-warning" target="doc" href="../doc/<%= docs[i]._id %>?edit=1">Edit</a>
          <a class="btn btn-danger" target="docs" href="../doc/<%= docs[i]._id %>?delete=1">Delete</a>
        </td>
      </tr>
<% } %>
    </tbody>
  </table>
</div>

</body>
</html>
